<!DOCTYPE html>
<html lang="en" style="height: 100%">
<head>
  <meta charset="utf-8">
</head>
<body style="height: 100%; margin: 0">
  <div id="container" style="height: 100%"></div>

  <script type="text/javascript" src="https://registry.npmmirror.com/jquery/3.7.1/files/dist/jquery.min.js"></script>
  <script type="text/javascript" src="https://registry.npmmirror.com/echarts/5.5.1/files/dist/echarts.min.js"></script>

  <script type="text/javascript">
    var dom = document.getElementById('container');
    var myChart = echarts.init(dom, null, {
      renderer: 'canvas',
      useDirtyRect: false
    });
    var app = {};
    var option;

    const indices = {
  name: 0,
  group: 1,
  id: 12
};
const schema = [
  { name: 'name', index: 0 },
  { name: 'group', index: 1 },
  { name: '2011', index: 2 },
  { name: '2010', index: 3 },
  { name: '2009', index: 4 },
  { name: '2008', index: 5 },
  { name: '2007', index: 6 },
  { name: '2006', index: 7 },
  { name: '2005', index: 8 },
  { name: '2004', index: 9 },
  { name: '2003', index: 10 },
  { name: '2002', index: 11 },
  { name: 'id', index: 12 }
];
const groupCategories = [];
const groupColors = [];
let data = [["Beijing","Beijing",16251.93,14113.58,12153.03,11115.0,9846.81,8117.78,6969.52,6033.21,5007.21,4315.0,0],["Tianjin","Tianjin",11307.28,9224.46,7521.85,6719.01,5252.76,4462.74,3905.64,3110.97,2578.03,2150.76,1],["Hebei","Hebei",24515.76,20394.26,17235.48,16011.97,13607.32,11467.6,10012.11,8477.63,6921.29,6018.28,2],["Shanxi","Shanxi",11237.55,9200.86,7358.31,7315.4,6024.45,4878.61,4230.53,3571.37,2855.23,2324.8,3],["Inner Mongolia","Inner Mongolia",14359.88,11672.0,9740.25,8496.2,6423.18,4944.25,3905.03,3041.07,2388.38,1940.94,4],["Liaoning","Liaoning",22226.7,18457.27,15212.49,13668.58,11164.3,9304.52,8047.26,6672.0,6002.54,5458.22,5],["Jilin","Jilin",10568.83,8667.58,7278.75,6426.1,5284.69,4275.12,3620.27,3122.01,2662.08,2348.54,6],["Heilongjiang","Heilongjiang",12582.0,10368.6,8587.0,8314.37,7104.0,6211.8,5513.7,4750.6,4057.4,3637.2,7],["Shanghai","Shanghai",19195.69,17165.98,15046.45,14069.87,12494.01,10572.24,9247.66,8072.83,6694.23,5741.03,8],["Jiangsu","Jiangsu",49110.27,41425.48,34457.3,30981.98,26018.48,21742.05,18598.69,15003.6,12442.87,10606.85,9],["Zhejiang","Zhejiang",32318.85,27722.31,22990.35,21462.69,18753.73,15718.47,13417.68,11648.7,9705.02,8003.67,10],["Anhui","Anhui",15300.65,12359.33,10062.82,8851.66,7360.92,6112.5,5350.17,4759.3,3923.11,3519.72,11],["Fujian","Fujian",17560.18,14737.12,12236.53,10823.01,9248.53,7583.85,6554.69,5763.35,4983.67,4467.55,12],["Jiangxi","Jiangxi",11702.82,9451.26,7655.18,6971.05,5800.25,4820.53,4056.76,3456.7,2807.41,2450.48,13],["Shandong","Shandong",45361.85,39169.92,33896.65,30933.28,25776.91,21900.19,18366.87,15021.84,12078.15,10275.5,14],["Henan","Henan",26931.03,23092.36,19480.46,18018.53,15012.46,12362.79,10587.42,8553.79,6867.7,6035.48,15],["Hubei","Hubei",19632.26,15967.61,12961.1,11328.92,9333.4,7617.47,6590.19,5633.24,4757.45,4212.82,16],["Hunan","Hunan",19669.56,16037.96,13059.69,11555.0,9439.6,7688.67,6596.1,5641.94,4659.99,4151.54,17],["Guangdong","Guangdong",53210.28,46013.06,39482.56,36796.71,31777.01,26587.76,22557.37,18864.62,15844.64,13502.42,18],["Guangxi","Guangxi",11720.87,9569.85,7759.16,7021.0,5823.41,4746.16,3984.1,3433.5,2821.11,2523.73,19],["Hainan","Hainan",2522.66,2064.5,1654.21,1503.06,1254.17,1065.67,918.75,819.66,713.96,642.73,20],["Chongqing","Chongqing",10011.37,7925.58,6530.01,5793.66,4676.13,3907.23,3467.72,3034.58,2555.72,2232.86,21],["Sichuan","Sichuan",21026.68,17185.48,14151.28,12601.23,10562.39,8690.24,7385.1,6379.63,5333.09,4725.01,22],["Guizhou","Guizhou",5701.84,4602.16,3912.68,3561.56,2884.11,2338.98,2005.42,1677.8,1426.34,1243.43,23],["Yunnan","Yunnan",8893.12,7224.18,6169.75,5692.12,4772.52,3988.14,3462.73,3081.91,2556.02,2312.82,24],["Tibet","Tibet",605.83,507.46,441.36,394.85,341.43,290.76,248.8,220.34,185.09,162.04,25],["Shaanxi","Shaanxi",12512.3,10123.48,8169.8,7314.58,5757.29,4743.61,3933.72,3175.58,2587.72,2253.39,26],["Gansu","Gansu",5020.37,4120.75,3387.56,3166.82,2703.98,2277.35,1933.98,1688.49,1399.83,1232.03,27],["Qinghai","Qinghai",1670.44,1350.43,1081.27,1018.62,797.35,648.5,543.32,466.1,390.2,340.65,28],["Ningxia","Ningxia",2102.21,1689.65,1353.31,1203.92,919.11,725.9,612.61,537.11,445.36,377.16,29],["Xinjiang","Xinjiang",6610.05,5437.47,4277.05,4183.21,3523.16,3045.26,2604.19,2209.09,1886.35,1612.6,30]]
function init(data) {
  normalizeData(data);
  myChart.setOption((option = getOption(data)));
}

init(data);
function normalizeData(originData) {
  const groupMap = {};
  originData.forEach(function (row) {
    const groupName = row[indices.group];
    if (!groupMap.hasOwnProperty(groupName)) {
      groupMap[groupName] = 1;
    }
  });
  originData.forEach(function (row) {
    row.forEach(function (item, index) {
      if (
        index !== indices.name &&
        index !== indices.group &&
        index !== indices.id
      ) {
        // Convert null to zero, as all of them under unit "g".
        row[index] = parseFloat(item) || 0;
      }
    });
  });
  for (const groupName in groupMap) {
    if (groupMap.hasOwnProperty(groupName)) {
      groupCategories.push(groupName);
    }
  }
  const hStep = Math.round(300 / (groupCategories.length - 1));
  for (var i = 0; i < groupCategories.length; i++) {
    groupColors.push(echarts.color.modifyHSL('#5A94DF', hStep * i));
  }
}
function getOption(data) {
  const lineStyle = {
    width: 2,
    opacity: 0.5
  };
  return {
    backgroundColor: '#333',
    tooltip: {
      padding: 10,
      backgroundColor: '#222',
      borderColor: '#777',
      borderWidth: 1
    },
    title: [
      {
        text: 'Groups',
        top: 0,
        left: 0,
        textStyle: {
          color: '#fff'
        }
      }
    ],
    visualMap: {
      show: true,
      type: 'piecewise',
      categories: groupCategories,
      dimension: indices.group,
      inRange: {
        color: groupColors //['#d94e5d','#eac736','#50a3ba']
      },
      outOfRange: {
        color: ['#ccc'] //['#d94e5d','#eac736','#50a3ba']
      },
      top: 20,
      textStyle: {
        color: '#fff'
      },
      realtime: false
    },
    parallelAxis: [
      { dim: 12, name: schema[12].name, scale: true, nameLocation: 'end' },
      { dim: 2, name: schema[2].name, nameLocation: 'end' },
      { dim: 4, name: schema[4].name, nameLocation: 'end' },
      { dim: 3, name: schema[3].name, nameLocation: 'end' },
      { dim: 5, name: schema[5].name, nameLocation: 'end' },
      { dim: 6, name: schema[6].name, nameLocation: 'end' },
      { dim: 7, name: schema[7].name, nameLocation: 'end' },
      { dim: 8, name: schema[8].name, nameLocation: 'end' },
      { dim: 9, name: schema[9].name, nameLocation: 'end' },
      { dim: 10, name: schema[10].name, nameLocation: 'end' },
      { dim: 11, name: schema[11].name, nameLocation: 'end' }
    ],
    parallel: {
      left: 280,
      top: 20,
      // top: 150,
      // height: 300,
      width: 400,
      layout: 'vertical',
      parallelAxisDefault: {
        type: 'value',
        name: 'GDP',
        nameLocation: 'end',
        nameGap: 20,
        nameTextStyle: {
          color: '#fff',
          fontSize: 14
        },
        axisLine: {
          lineStyle: {
            color: '#aaa'
          }
        },
        axisTick: {
          lineStyle: {
            color: '#777'
          }
        },
        splitLine: {
          show: false
        },
        axisLabel: {
          color: '#fff'
        },
        realtime: false
      }
    },
    animation: false,
    series: [
      {
        name: 'GDP',
        type: 'parallel',
        lineStyle: lineStyle,
        inactiveOpacity: 0,
        activeOpacity: 0.01,
        progressive: 500,
        smooth: true,
        data: data
      }
    ]
  };
}

    if (option && typeof option === 'object') {
      myChart.setOption(option);
    }

    window.addEventListener('resize', myChart.resize);
  </script>
</body>
</html>